# 渗透工具：蚁剑(AntSword)教学

url：https://www.freebuf.com/articles/web/270488.html



![1619090271_60815b5fa00bcec626580.png!small?1619090271347](images/1619090271_60815b5fa00bcec626580.png!small)

## 0x00 简介

蚁剑(AntSword)是一款开源的跨平台WebShell管理工具，它主要面向于合法授权的渗透测试安全人员以及进行常规操作的网站管理员。

蚁剑推崇模块化的开发思想，遵循开源，就要开得漂亮的原则，致力于为不同层次的人群提供最简单易懂、方便直接的代码展示及其修改说明，努力让大家可以一起为这个项目贡献出力所能及的点滴，让这款工具真正能让大家用得顺心、舒适，让它能为大家施展出最人性化最适合你的能力！

## 0x01 安装

蚁剑分为加载器和核心模块两部分，核心源码可由加载器自动下载

源码地址：

```
github.com：AntSwordProject/antSword
```

加载器Github地址：

```
github：AntSwordProject/AntSword-Loader
```

加载器Gitee地址：

```
gitee.com：AntSwordProject/AntSword-Loader
```

将加载器和源码下载后解压至磁盘

![1619090023_60815a67e56156c17ac14.png!small?1619090023054](images/1619090023_60815a67e56156c17ac14.png!small)

进去加载器目录启动加载器

![1619090033_60815a719fabd3176d88c.png!small?1619090032869](images/1619090033_60815a719fabd3176d88c.png!small)

![1619090040_60815a781242b4710e53d.png!small?1619090039462](images/1619090040_60815a781242b4710e53d.png!small)点击初始化，选择源码目录![1619090046_60815a7e229ad2881966b.png!small?1619090045334](images/1619090046_60815a7e229ad2881966b.png!small)

点击选择文件夹，等待初始化完毕后再次打开即可使用![1619090054_60815a863ffba6c1d806c.png!small](images/1619090054_60815a863ffba6c1d806c.png!small)

## 0x02 基本使用

使用蚁剑需要一个WEB环境，本次使用PHPStudy搭建测试环境

### 2.1 创建PHP测试站点

![1619090075_60815a9b0eabe59a981f3.png!small?1619090074331](images/1619090075_60815a9b0eabe59a981f3.png!small)

![1619090082_60815aa2579a178344bf6.png!small?1619090081514](images/1619090082_60815aa2579a178344bf6.png!small)浏览器访问![1619090090_60815aaa70cdc121c65d9.png!small?1619090089635](images/1619090090_60815aaa70cdc121c65d9.png!small)

注意：这里如果报403是正常情况(个人取消了PHPstudy默认页面)

### 2.2 制作PHP后门

蚁剑官方为我们提供了制作好的后门

```
项目地址：github:AntSwordProject/AwesomeScript
```

![1619090121_60815ac92a945d4a9a92f.png!small?1619090120338](images/1619090121_60815ac92a945d4a9a92f.png!small)官方的脚本均做了不同程度“变异”，在之后的教程中逐渐讲解，本次使用经典的PHP一句话木马![1619090130_60815ad27e31fb0c211d8.png!small?1619090129653](images/1619090130_60815ad27e31fb0c211d8.png!small)

将木马放在站点目录下![1619090135_60815ad782abe00fb3475.png!small?1619090134754](images/1619090135_60815ad782abe00fb3475.png!small)

开启浏览器访问木马![1619090140_60815adc0ca1d51fc8870.png!small?1619090139185](images/1619090140_60815adc0ca1d51fc8870.png!small)

返回空白，打开浏览器开发工具查看数据包![1619090145_60815ae1c13767a7e7e37.png!small?1619090145027](images/1619090145_60815ae1c13767a7e7e37.png!small)

响应码为200，说明脚本正常运行

### 2.3 使用蚁剑连接WebShell

打开蚁剑添加数据![1619090155_60815aebeae1ace1c1fe6.png!small?1619090155035](images/1619090155_60815aebeae1ace1c1fe6.png!small)

填写连接信息，点击测试![1619090162_60815af220e58867ccf57.png!small?1619090161312](images/1619090162_60815af220e58867ccf57.png!small)

测试正常，点击添加![1619090168_60815af84a67fc03b9ad2.png!small?1619090167413](images/1619090168_60815af84a67fc03b9ad2.png!small)

![1619090174_60815afe0c03fa42dc2e9.png!small?1619090173201](images/1619090174_60815afe0c03fa42dc2e9.png!small)选中该项右键查看功能菜单![1619090180_60815b04bd11a69170871.png!small?1619090179911](images/1619090180_60815b04bd11a69170871.png!small)

点击虚拟终端![1619090185_60815b095801270f8aca5.png!small?1619090184470](images/1619090185_60815b095801270f8aca5.png!small)

执行dir命令![1619090190_60815b0e40c4df880ec4d.png!small?1619090189384](images/1619090190_60815b0e40c4df880ec4d.png!small)

回到主菜单![1619090195_60815b13895a27369fb34.png!small?1619090194722](images/1619090195_60815b13895a27369fb34.png!small)

选择文件管理![1619090202_60815b1a34a7163dc9956.png!small?1619090201372](images/1619090202_60815b1a34a7163dc9956.png!small)

![1619090211_60815b234599898c80794.png!small?1619090210665](images/1619090211_60815b234599898c80794.png!small)双击shell.php查看内容，注意关闭的位置![1619090218_60815b2ad426c3804e525.png!small?1619090218102](images/1619090218_60815b2ad426c3804e525.png!small)

## 0x03 END

本次演示了如何使用蚁剑连接webshell以及虚拟终端和文件管理两大功能，望各位都能连接属于自己的专属shell