# 渗透神器：burpsuit教程 （入门）

url：https://www.freebuf.com/articles/web/270508.html

## 0x00 前言

Burp Suite (简称BP，下同)是用于攻击web 应用程序的集成平台。它包含了许多工具，并为这些工具设计了许多接口，以促进加快攻击应用程序的过程。

从本节开始将为大家陆续带来BP各个模块的使用说明

## 0x01 中间人攻击

中间人攻击（Man-in-the-MiddleAttack，简称“MITM攻击”）是一种“间接”的入侵攻击，这种攻击模式是通过各种技术手段将受入侵者控制的一台计算机虚拟放置在网络连接中的两台通信计算机之间，这台计算机就称为“中间人”。

## 0x02 核心功能—Proxy

**数据是一切的基础**

Proxy代理模块主要用于拦截浏览器的http会话内容，给其他模块功能提供数据，Proxy模块如下图所示![1619137136_608212709fa99f2c516fb.png!small?1619137135706](images/1619137136_608212709fa99f2c516fb.png!small)

Proxy模块由四个部分组成，分别是Intercept、HTTP history、Websockets history、options，接下来分别演示使用

### 2.1 Intercept

这个词学汇编和逆向的同学肯定是非常熟悉了，就是截断的意思；这里控制整个代理模块是否使用截断模式。



TIPS：在BP新版本中，增加了专用的浏览器方便进行渗透测试![1619137148_6082127c9961e4119f76b.png!small?1619137147475](images/1619137148_6082127c9961e4119f76b.png!small)

如果是使用低版本的同学，可以在浏览器中手动设置网络代理![1619137168_608212901ac7b18f2480b.png!small?1619137166956](images/1619137168_608212901ac7b18f2480b.png!small)

手动修改代理设置是一件很繁琐的事，这里推荐大家使用SwitchyOmega插件方便快速的切换代理设置



当截断模式处于关闭状态时，BP可以视为正常的代理服务器![1619137173_6082129567256637b9fd2.png!small?1619137172617](images/1619137173_6082129567256637b9fd2.png!small)

反之，当截断模式处于开启状态下，所有符合条件的数据包都将被拦截等待处理![1619137292_6082130cb448a3242854a.png!small?1619137291598](images/1619137292_6082130cb448a3242854a.png!small)

当拦截到新的数据包后，对应的标题会高亮显示，此时我们就可以对数据包进行修改了![1619137297_60821311e639ce44f0a1a.png!small?1619137296910](images/1619137297_60821311e639ce44f0a1a.png!small)

修改完成后点击发送(Forward)将修改后的数据包发送(放包)，如果看着数据包不舒服可以点击丢弃(Drop)(弃包)![1619137447_608213a73fc3e65f281ce.png!small?1619137446412](images/1619137447_608213a73fc3e65f281ce.png!small)

在行动(Action)一栏中存在很多选项，可以将proxy中的数据包发送至其他模块中![1619137454_608213aec98fdc070ed8c.png!small?1619137453668](images/1619137454_608213aec98fdc070ed8c.png!small)

### 2.2 HTTP history

这里记录了每一个HTTP数据包，可以通过此功能查看历史数据包![1619137462_608213b649681294c8f22.png!small?1619137461179](images/1619137462_608213b649681294c8f22.png!small)

点击过滤器可以设置过滤选项![1619137539_60821403ee21556d59823.png!small?1619137538828](images/1619137539_60821403ee21556d59823.png!small)

在记录中可以查看每一个数据包的明细(请求和响应)，并可以发送到其他模块![1619137545_60821409c0209c4a0ad9d.png!small?1619137545291](images/1619137545_60821409c0209c4a0ad9d.png!small)

### 2.3 Websockets history

该功能和HTTP history十分类似，实际中很少用到



查看历史数据包![1619137556_608214149fa290f341b9b.png!small?1619137555797](images/1619137556_608214149fa290f341b9b.png!small)

设置过滤器![1619137562_6082141a8e0ddbeace2c9.png!small?1619137561457](images/1619137562_6082141a8e0ddbeace2c9.png!small)

### 2.4 options

该部分主要用于配置proxy，接下来逐个演示

![1619137571_60821423a404bc7f6cf5f.png!small?1619137570867](images/1619137571_60821423a404bc7f6cf5f.png!small)

**代理监听器**

可以理解为设置数据的来源，可以开启多个![1619137577_608214298c0ce116940a9.png!small?1619137581731](images/1619137577_608214298c0ce116940a9.png!small)

![1619137591_608214378ee805e53f668.png!small](images/1619137591_608214378ee805e53f668.png!small)配置CA证书部分比较繁琐，留以后单独出一期



**拦截客户端请求**

该部分用于配置请求数据包的拦截条件，支持多条规则同时匹配![1619137605_608214454b02524bee255.png!small?1619137604115](images/1619137605_608214454b02524bee255.png!small)

现在增加一条规则：拦截所有目标IP为123.123.123.123的数据包

![1619137609_60821449bd2e6f34f43ef.png!small?1619137609222](images/1619137609_60821449bd2e6f34f43ef.png!small)

![1619137615_6082144fc8ec2b922c225.png!small?1619137614680](images/1619137615_6082144fc8ec2b922c225.png!small)配置了多条规则后可以很方便的选择开关

自动更新Content-Length选项主要用于修改数据包后可以自动计算长度，在一部分情况下需要关闭该功能(比如想DOS)

![1619137625_60821459b6ee8f054d716.png!small?1619137624496](images/1619137625_60821459b6ee8f054d716.png!small)

**服务器响应拦截和修改**

该部分主要配置响应数据包的拦截条件及自动修改![1619137638_6082146605b992bb63d37.png!small?1619137637208](images/1619137638_6082146605b992bb63d37.png!small)

注意：该功能默认是关闭的，需要手动开启![1619137642_6082146aa0b4e63190223.png!small?1619137641512](images/1619137642_6082146aa0b4e63190223.png!small)

和请求拦截很类似，允许自定义拦截条件，同时还支持一些常用选项，比如删除JS的表单验证



**匹配和替换**

该选项允许对请求和响应中的数据进行自动查找和替换，十分有用![1619137652_60821474201bdea328814.png!small?1619137651074](images/1619137652_60821474201bdea328814.png!small)



其他选项看实际需求即可

## 0x03 QA专区

Q：HTTP网站警告证书有xxxxx问题是怎么回事

A：应为BP使用的是自签发证书，浏览器不认，点击信任即可



Q：浏览器提示网站开启了HSTS，无法信任怎么办

A：清除浏览器缓存或者使用BP自带的专用浏览器，前者还需要清除每一个数据包中的HSTS字段



Q：部分请求和响应抓不到怎么办

A：看看过滤器是否包含了该项



Q：其他问题怎么办？

A：点头像看简介->留言